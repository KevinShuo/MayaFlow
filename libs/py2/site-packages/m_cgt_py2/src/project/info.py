# -*- coding: utf-8 -*-
from m_cgt_py2.src.login import PermissionStrategy


class CGTProjectInfo(object):
    def __init__(self, login_strategy):
        # type: (PermissionStrategy) -> None
        self.db = "public"
        self.t_tw = login_strategy.login()

    @property
    def modules(self):
        return "project"

    @property
    def projects(self):
        task_id_list = self.t_tw.info.get_id(self.db, self.modules, [], limit="20000")
        for data in self.t_tw.info.get(self.db, self.modules, task_id_list, self.fields):
            yield data

    @property
    def active_projects(self):
        task_id_list = self.t_tw.info.get_id(self.db, self.modules, [['project.status', '=', 'Active']], limit="20000")
        for data in self.t_tw.info.get(self.db, self.modules, task_id_list, self.fields):
            yield data

    @property
    def fields(self):
        return self.t_tw.info.fields("public", self.modules)
