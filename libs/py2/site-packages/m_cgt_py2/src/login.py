# -*- coding: utf-8 -*-
import abc

import cgtw2

try:
    from imp import reload

    reload(cgtw2)
except:
    import importlib

    importlib.reload(cgtw2)


class PermissionStrategy(object):
    __metaclass__ = abc.ABCMeta

    @abc.abstractmethod
    def login(self):
        # type: () -> 'tw'
        pass


class NormalUserStrategy(PermissionStrategy):
    def login(self):
        return cgtw2.tw()


class AdminUserStrategy(PermissionStrategy):
    def login(self):
        t_tw = cgtw2.tw()
        ip = t_tw.login.http_server_ip()
        user = "xinxitongzhizhushou"
        password = "xinxitongzhi@0914"
        return cgtw2.tw(ip, user, password)


class CGTLogin:
    def __init__(self, strategy):
        # type: (PermissionStrategy) -> None
        self.strategy = strategy

    @property
    def tw(self):
        return self.strategy.login()
