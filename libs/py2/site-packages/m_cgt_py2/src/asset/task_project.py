# -*- coding: utf-8 -*-
from m_cgt_py2.src.login import PermissionStrategy


class CGTAssetTaskProject(object):
    def __init__(self, project_db, login_strategy):
        # type: (str,PermissionStrategy) -> None
        self.project_db = project_db
        self.t_tw = login_strategy.login()

    def get_data(self, filter_param=None):
        if filter_param is None:
            filter_param = []
        task_id = self.t_tw.task.get_id(self.project_db, self.module, filter_param, limit="20000")
        data = self.t_tw.task.get(self.project_db, self.module, task_id, self.fields)
        if data is None:
            return
        for item in data:
            yield item

    @property
    def module(self):
        return "asset"

    @property
    def fields(self):
        return self.t_tw.info.fields(self.project_db, self.module)

    @property
    def fields_and_str(self):
        return self.t_tw.info.fields_and_str(self.project_db, self.module)
